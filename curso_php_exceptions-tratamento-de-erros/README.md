# PHP studies üöÄüêò
*** 
![elefantinho-do-bem-250](https://user-images.githubusercontent.com/88351614/183260985-d5341984-bdd4-4a1b-8a7a-74bb34254763.jpg)

# Cursos
***
- [x] PHP Exceptions: tratamento de erros
* Aprenda a lan√ßar uma exception
* Customize uma exception
* Capture v√°rias exce√ß√µes ao mesmo tempo
* Utilize o bloco try-catch
* Veja a utilidade do bloco finally
<hr>

># Comandos e sintaxes aprendidas durante curso
***
# Pilha de execu√ß√£o
## Tratamento de exce√ß√µes
* Agora j√° sabemos como fazer com que o nosso c√≥digo saiba reagir quando alguma exce√ß√£o acontece durante a execu√ß√£o.

```
try {
    $arrayFixo = new SplFixedArray(2);
    $arrayFixo[3];
} catch (RuntimeException $erro){
    echo "Aconteceu um erro na fun√ß√£o 1" . PHP_EOL;
}
```
> N√£o √© posss√≠vel ter uma instru√ß√£o catch, sem uma instru√ß√£o try
> 
> Em nosso catch n√≥s informamos qual tipo de exce√ß√£o n√≥s queremos pegar e al√©m disso, definimos uma vari√°vel que vai conter essa exce√ß√£o.

<hr>

## Pegando m√∫tiplas exce√ß√µes
* Quando queremos personalizar todas as exception que temos podemos fazer d√° seguinte maneira:
```
try {
    funcao2();
} catch (RuntimeException){
    echo 'Na fun√ß√£o 1, eu resolvi o problema na fun√ß√£o 2' . PHP_EOL;
} catch (DivisionByZeroError){
    echo 'Erro ao dividir um n√∫mero por zero' . PHP_EOL; 
}
```
* Quando s√≥ queremos pegar a exception e n√£o precisamos personalizar a mensagem de erro podemos fazer desssa maneira:

```
try {
    funcao2();
} catch (RuntimeException | DivisionByZeroError){
    echo 'Na fun√ß√£o 1, eu resolvi o problema na fun√ß√£o 2' . PHP_EOL;
}
```
 
* Podemos tamb√©m pegar a mensagem de erro

```
try {
    funcao2();
} catch (RuntimeException | DivisionByZeroError $erroOuExcecao){
    echo $erroOuExcecao->getMessage() . PHP_EOL;
}
```
> Temos algumas informa√ß√µes que podemos pegar do erro:
* echo $erroOuExcecao->getMessage() . PHP_EOL;
* echo $erroOuExcecao->getLine() . PHP_EOL;
* echo $erroOuExcecao->getFile() . PHP_EOL;
* echo $erroOuExcecao->getTraceAsString() . PHP_EOL;

> getMessage() tr√°s a mensagem de erro. 
> 
> getLine() tr√°s a linha. 
> 
> getFile() tr√°s o nome do arquivo que ocorreu o erro.
> 
> getTraceAsString() tr√°s a pilha, todo o caminho que levou para chegar at√© o ponto do erro.

<hr>

### Lan√ßar uma exce√ß√£o
```
$exception = new RuntimeException();
throw $exception;
```

> 1 - Para lan√ßar uma exce√ß√£o, al√©m de instanci√°-la, √© necess√°rio lan√ß√°-la atrav√©s do throw
> 
> 2- Quando uma exce√ß√£o √© lan√ßada, o c√≥digo para abruptamente, por padr√£o
> 
> 3- Podemos atribuir uma mensagem a uma exce√ß√£o
> 
> 4 - Uma exce√ß√£o nada mais √© do que uma classe, logo, podemos instanciar exce√ß√µes

### Hierarquia de exce√ß√µes

> No PHP existe uma interface, chamada Throwable, que s√≥ √© utilizada pelo pr√≥prio PHP, e tudo que implementa essa interface pode ser lan√ßado por meio da palavra-chave throw. N√£o √© poss√≠vel criarmos uma classe pr√≥pria que implemente diretamente a interface Throwable, ainda que seja poss√≠vel criarmos classes de exce√ß√£o

![img.png](img.png)

Falamos um pouco sobre a hierarquia dos tipos que podem ser lan√ßados com a palavra throws, o tipo (classe ou interface) base de toda essa hierarquia √© Throwable.

> Throwable essa interface √© a base da hierarquia de erros e exce√ß√µes do PHP.

### SPL Exceptions

> A linguagem PHP essencialmente n√£o define nenhuma exce√ß√£o. Entretanto, existe uma extens√£o do PHP, habilitada por padr√£o em qualquer instala√ß√£o, chamada SPL - sigla para Standard PHP Library, ou "biblioteca padr√£o do PHP" - e que fornece diversas funcionalidades.

> Vimos como fazer um bloco catch pegar diversos "problemas", sem utilizar o multi-catch, informando apenas um tipo:
Como isso √© poss√≠vel?
> 
> Resposta: Atrav√©s do polimorfismo da orienta√ß√£o a objetos
> * Podemos informar um tipo base do nosso problema, e qualquer outro tipo que estenda ele, ou seja, qualquer tipo que herde desse tipo informado, ser√° pego pelo nosso catch

``` 
try {
    funcao2();
} catch (Throwable $erroOuExcecao){
    echo $erroOuExcecao->getMessage() . PHP_EOL;
    echo $erroOuExcecao->getLine() . PHP_EOL;
    echo $erroOuExcecao->getFile() . PHP_EOL;
    echo $erroOuExcecao->getTraceAsString() . PHP_EOL;
}
```

<hr>

### Criando uma exce√ß√£o
> Criamos a nossa primeira exce√ß√£o de dom√≠nio, ou seja, uma exce√ß√£o que fa√ßa sentido para as nossas regras de neg√≥cio.

* Para definirmos uma exce√ß√£o v√°lida √© necess√°rio criar uma classe que herde de alguma Exception, ou de uma classe filha.

<hr>

## Finally

> Quando usamos um try/catch, temos acesso ainda a um terceiro bloco n√£o-obrigat√≥rio e pouco utilizado: o finally, que √© executado independentemente da ocorr√™ncia de uma exce√ß√£o.

``` 
<?php
$arquivo = fopen('temp.txt', 'w');

try  {
    fwrite($arquivo, 'Qualquer coisa');
    //throw new Exception('Exce√ß√£o aqui');
} catch (Throwable $e) {
    echo "Erro ao escrever no arquivo" . PHP_EOL;
} finally {
    echo "Finally" . PHP_EOL;
    fclose($arquivo);
}
```
> O finally sempre √© executado quer peguemos uma exce√ß√£o ou n√£o.

<hr>

### Tipos de erros
Antes da vers√£o 7 do PHP, todos os erros gerados no c√≥digo pelo pr√≥prio PHP eram lan√ßados de uma forma bem peculiar e dif√≠cil de tratar.

A partir da vers√£o 7, novos m√©todos e fun√ß√µes do pr√≥prio PHP est√£o come√ßando a lan√ßar exce√ß√µes e erros que podemos tratar com try - catch, mas ainda falta muito para esse caso ser a maioria.

Ent√£o, vale muito a pena ler com mais calma a documenta√ß√£o sobre os erros no PHP: [Erros](https://www.php.net/manual/pt_BR/language.errors.basics.php)

<hr>

### Configura√ß√µes de erros

* As duas principais configura√ß√µes s√£o error_reporting e display_errors.

> Existem duas formas de modificarmos este comportamento: editando o arquivo php.ini do seu computador, que √© o m√©todo ideal; ou por meio da fun√ß√£o ini_set(), passando o nome e o valor da configura√ß√£o. Esta √∫ltima faz exatamente o que far√≠amos editando diretamente o arquivo php.ini
> 
> Como essa configura√ß√£o √© t√£o importante, o PHP possui tamb√©m uma fun√ß√£o espec√≠fica error_reporting() com a qual podemos definir que erros queremos exibir. Se passarmos E_ALL, por exemplo, exibiremos todos os erros, independentemente de quais forem.

``` 
<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);
?>
```
[Documenta√ß√£o](https://www.php.net/manual/en/errorfunc.constants.php) contendo todos os erros

* Os principais tipos de erros do PHP:
  * Notice
  * Warning
  * Error (erro fatal)
> Tratar os erros utilizando a fun√ß√£o set_error_handler
<hr>

# Certificado
***
![img_1.png](img_1.png)

